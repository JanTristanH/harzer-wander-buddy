<mvc:View
    controllerName="hwb.frontendhwb.controller.FriendsList"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    displayBlock="true"
    height="100%"
    busyIndicatorDelay="0"
>
    <Page title="{i18n>friends}" class="sapUiResponsiveContentPadding">
        <headerContent>
            <core:Fragment
                fragmentName="hwb.frontendhwb.fragment.currentUserAvatar"
                type="XML"
            />
        </headerContent>
        <content>
            <IconTabBar expandable="false">
                <items>
                    <IconTabFilter
                        key="friends"
                        text="{i18n>friends}"
                    >
                        <SearchField
                            id="idUserSearchField"
                            showSearchButton="false"
                            enableSuggestions="true"
                            liveChange=".onSearchFieldLiveChange"
                            suggestionItems="{local>/suggestionItems}"
                        >
                            <SuggestionItem />
                        </SearchField>
                        <Button
                            press="onCreateDummyFriendship"
                            text="Create Dummy friendship"
                        />
                        <!-- friends of User -->
                        <List
                            id="idFriendsList"
                            items="{
                                path: '/MyFriends'
                            }"
                            headerText="{i18n>friendListHeader}"
                            noDataText="{i18n>friendListNoData}"
                        >
                            <items>
                                <CustomListItem>
                                    <HBox
                                        justifyContent="SpaceBetween"
                                        alignItems="Center"
                                        width="100%"
                                        class="sapUiTinyMargin"
                                    >
                                        <!-- Friend Info: Avatar + Name -->
                                        <HBox alignItems="Center">
                                            <Avatar
                                                src="{picture}"
                                                displaySize="S"
                                                class="sapUiSmallMarginEnd"
                                            />
                                            <Text
                                                text="{name}"
                                                class="sapUiTinyMargin"
                                            />
                                        </HBox>
                                        <!-- Friend Action Buttons -->
                                        <HBox>
                                            <!-- Add Friend Button (visible when not friends) -->
                                            <Button
                                                icon="sap-icon://add"
                                                type="Transparent"
                                                visible="{= !${isFriend} }"
                                                press="onAddFriend"
                                                class="sapUiSmallMarginEnd"
                                            />
                                            <!-- Remove Friend Button (visible when already friends) -->
                                            <Button
                                                icon="sap-icon://delete"
                                                type="Transparent"
                                                visible="{isFriend}"
                                                press="onRemoveFriend"
                                                class="sapUiSmallMarginEnd"
                                            />
                                        </HBox>
                                    </HBox>
                                </CustomListItem>
                            </items>
                        </List>
                    </IconTabFilter>
                    <IconTabFilter
                        key="pendingFriendshipRequests"
                        text="{i18n>pendingFriendshipRequests}"
                    >
                        <!-- PendingFriendshipRequests of user-->
                        <List
                            items="{path: '/PendingFriendshipRequests', parameters: {expand: 'fromUser,toUser'}}"
                            noDataText="{i18n>pendingFriendshipRequestsNoData}"
                        >
                            <items>
                                <StandardListItem
                                    title="{fromUser/name}"
                                    description="{toUser/name}"
                                    icon="{toUser/picture}"
                                    type="Active"
                                    press="onAcceptPendingFriendshipRequest"
                                />
                            </items>
                        </List>
                    </IconTabFilter>
                </items>
            </IconTabBar>
        </content>
        <footer>
            <core:Fragment
                fragmentName="hwb.frontendhwb.fragment.Toolbar"
                type="XML"
            />
        </footer>
    </Page>
</mvc:View>
